import{r as x,u as P,a as $,C as D,R as B,b as U}from"./convex-BXJdso_C.js";import{r as q}from"./vendor-CgVA3q3W.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function a(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=a(s);fetch(s.href,l)}})();var I={exports:{}},R={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y=x,z=Symbol.for("react.element"),H=Symbol.for("react.fragment"),V=Object.prototype.hasOwnProperty,K=Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,J={key:!0,ref:!0,__self:!0,__source:!0};function O(t,n,a){var r,s={},l=null,d=null;a!==void 0&&(l=""+a),n.key!==void 0&&(l=""+n.key),n.ref!==void 0&&(d=n.ref);for(r in n)V.call(n,r)&&!J.hasOwnProperty(r)&&(s[r]=n[r]);if(t&&t.defaultProps)for(r in n=t.defaultProps,n)s[r]===void 0&&(s[r]=n[r]);return{$$typeof:z,type:t,key:l,ref:d,props:s,_owner:K.current}}R.Fragment=H;R.jsx=O;R.jsxs=O;I.exports=R;var e=I.exports,L={},F=q;L.createRoot=F.createRoot,L.hydrateRoot=F.hydrateRoot;const Q=Symbol.for("functionName");function W(t=[]){const n={get(a,r){if(typeof r=="string"){const s=[...t,r];return W(s)}else if(r===Q){if(t.length<2){const d=["api",...t].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${d}\``)}const s=t.slice(0,-1).join("/"),l=t[t.length-1];return l==="default"?s:s+":"+l}else return r===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},n)}const X=W(),y=X;function G({value:t,onChange:n}){const[a,r]=x.useState(t),s=x.useRef(null);x.useEffect(()=>{r(t)},[t]);const l=h=>{r(h),s.current&&clearTimeout(s.current),s.current=window.setTimeout(()=>{n(h)},300)},d=()=>{r(""),n("")};return e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"search",value:a,onChange:h=>l(h.target.value),placeholder:"Search products, brands, strains...",className:"w-full bg-neutral-900 border border-neutral-700 rounded-xl px-4 py-3 pl-11 text-white placeholder-neutral-500 focus:outline-none focus:border-cannabis-500 focus:ring-1 focus:ring-cannabis-500 transition-colors","aria-label":"Search products, brands, and strains",autoComplete:"off",autoCorrect:"off",spellCheck:"false"}),e.jsx("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),a&&e.jsx("button",{onClick:d,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-full hover:bg-neutral-700 text-neutral-400 hover:text-neutral-200 transition-colors","aria-label":"Clear search",type:"button",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function Z({options:t,filters:n,onChange:a,onClear:r}){return e.jsx("div",{className:"bg-neutral-900 border-t border-neutral-800 px-4 py-4",role:"region","aria-label":"Product filters",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-3",children:[e.jsxs("fieldset",{children:[e.jsx("legend",{className:"text-xs text-neutral-500 mb-2 font-medium",children:"Category"}),e.jsxs("div",{className:"flex flex-wrap gap-2",role:"group","aria-label":"Filter by category",children:[e.jsx("button",{onClick:()=>a("category",null),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${n.category?"bg-neutral-800 text-neutral-400 hover:bg-neutral-700":"bg-cannabis-600 text-white"}`,"aria-pressed":!n.category,children:"All"}),t.categories.slice(0,8).map(s=>e.jsx("button",{onClick:()=>a("category",s),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${n.category===s?"bg-cannabis-600 text-white":"bg-neutral-800 text-neutral-400 hover:bg-neutral-700"}`,"aria-pressed":n.category===s,children:ee(s)},s))]})]}),e.jsxs("fieldset",{children:[e.jsx("legend",{className:"text-xs text-neutral-500 mb-2 font-medium",children:"Strain Type"}),e.jsxs("div",{className:"flex flex-wrap gap-2",role:"group","aria-label":"Filter by strain type",children:[e.jsx("button",{onClick:()=>a("strain",null),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${n.strain?"bg-neutral-800 text-neutral-400 hover:bg-neutral-700":"bg-cannabis-600 text-white"}`,"aria-pressed":!n.strain,children:"All"}),["Indica","Sativa","Hybrid"].map(s=>e.jsx("button",{onClick:()=>a("strain",s),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${n.strain===s?"bg-cannabis-600 text-white":"bg-neutral-800 text-neutral-400 hover:bg-neutral-700"}`,"aria-pressed":n.strain===s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dispensary-filter",className:"text-xs text-neutral-500 mb-2 font-medium block",children:"Dispensary"}),e.jsxs("select",{id:"dispensary-filter",value:n.retailerId||"",onChange:s=>a("retailerId",s.target.value||null),className:"w-full bg-neutral-800 border border-neutral-700 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-cannabis-500",children:[e.jsx("option",{value:"",children:"All Dispensaries"}),t.retailers.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.city,")"]},s.id))]})]}),e.jsx("button",{onClick:r,className:"w-full py-2 text-sm text-neutral-400 hover:text-white transition-colors",children:"Clear all filters"})]})})}function ee(t){return t.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}function te({inStock:t,stockLevel:n,lastInStockAt:a,size:r="md"}){const l=t?n==="low"?{emoji:"üü°",text:"Low Stock",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"}:{emoji:"üü¢",text:"In Stock",color:"bg-green-500/20 text-green-400 border-green-500/30"}:{emoji:"üî¥",text:"Sold Out",color:"bg-red-500/20 text-red-400 border-red-500/30"},d=r==="sm"?"text-xs px-2 py-0.5":"text-sm px-2.5 py-1";return e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full border font-medium ${l.color} ${d}`,children:[e.jsx("span",{children:l.emoji}),e.jsx("span",{children:l.text})]}),!t&&a&&e.jsxs("span",{className:"text-xs text-neutral-500",children:["Last seen ",se(a)]})]})}function se(t){const a=Date.now()-t,r=Math.floor(a/6e4),s=Math.floor(r/60),l=Math.floor(s/24);return l>0?`${l}d ago`:s>0?`${s}h ago`:r>0?`${r}m ago`:"just now"}const M=()=>{try{return localStorage.getItem("cannasignal_email")}catch{return null}},ne=t=>{try{localStorage.setItem("cannasignal_email",t)}catch{}};function re({productId:t,productName:n,onUpgradeNeeded:a}){const[r,s]=x.useState(M()||""),[l,d]=x.useState(!1),[h,p]=x.useState(!1),[N,m]=x.useState(null),[S,c]=x.useState(!1),[u,v]=x.useState(!1),g=M(),w=P(y.alerts.checkWatchExists,g?{email:g,productId:t}:"skip"),k=P(y.alerts.getWatcherCount,{productId:t}),i=P(y.subscriptions.canAddWatch,g?{email:g}:"skip"),f=$(y.alerts.watchProduct),j=$(y.alerts.unwatchProduct);x.useEffect(()=>{d(!1),m(null),c(!1)},[t]);const b=async()=>{if(g&&!w){if(i&&!i.canAdd){v(!0);return}p(!0),m(null);try{await f({email:g,productId:t,alertTypes:["restock","price_drop"]}),c(!0),setTimeout(()=>c(!1),2e3)}catch(C){m(C.message||"Failed to watch product")}finally{p(!1)}return}if(g&&w){p(!0);try{await j({email:g,productId:t})}catch(C){m(C.message||"Failed to unwatch")}finally{p(!1)}return}d(!0)},o=async C=>{if(C.preventDefault(),!r.trim()){m("Please enter your email");return}p(!0),m(null);try{await f({email:r.trim(),productId:t,alertTypes:["restock","price_drop"]}),ne(r.trim()),d(!1),c(!0),setTimeout(()=>c(!1),2e3)}catch(_){m(_.message||"Failed to watch product")}finally{p(!1)}};return u?e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-b from-amber-900/30 to-neutral-800/50 rounded-lg border border-amber-700/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:"‚ö†Ô∏è"}),e.jsx("p",{className:"text-sm font-medium text-white",children:"Watch Limit Reached"})]}),e.jsxs("p",{className:"text-xs text-neutral-400 mb-3",children:["Free accounts can watch up to ",(i==null?void 0:i.limit)||3," products. Upgrade to Premium for unlimited watches!"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{v(!1),a==null||a()},className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-cannabis-600 to-cannabis-500 text-white rounded-lg text-sm font-semibold hover:from-cannabis-500 hover:to-cannabis-400 transition-all",children:"Upgrade to Premium"}),e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2.5 bg-neutral-800 text-neutral-300 rounded-lg text-sm hover:bg-neutral-700",children:"Maybe Later"})]}),e.jsxs("p",{className:"text-center text-xs text-neutral-500 mt-3",children:["Currently watching ",(i==null?void 0:i.currentCount)||0," / ",(i==null?void 0:i.limit)||3," products"]})]}):l?e.jsx("div",{className:"mt-4 p-4 bg-neutral-800 rounded-lg border border-neutral-700",children:e.jsxs("form",{onSubmit:o,children:[e.jsx("p",{className:"text-sm text-neutral-300 mb-3",children:"Enter your email to get notified when this product restocks or drops in price"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",value:r,onChange:C=>s(C.target.value),placeholder:"your@email.com",className:"flex-1 px-3 py-2 bg-neutral-900 border border-neutral-600 rounded-lg text-white text-sm focus:outline-none focus:border-cannabis-500",autoFocus:!0}),e.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-cannabis-600 text-white rounded-lg text-sm font-medium hover:bg-cannabis-500 disabled:opacity-50",children:h?"...":"Watch"})]}),N&&e.jsx("p",{className:"text-red-400 text-xs mt-2",children:N}),e.jsx("button",{type:"button",onClick:()=>d(!1),className:"text-xs text-neutral-500 mt-2 hover:text-neutral-400",children:"Cancel"})]})}):e.jsxs("div",{className:"mt-4",children:[e.jsx("button",{onClick:b,disabled:h,className:`w-full py-3 rounded-lg font-medium flex items-center justify-center gap-2 transition-colors ${w?"bg-cannabis-600/20 text-cannabis-400 border border-cannabis-600 hover:bg-cannabis-600/30":S?"bg-green-600 text-white":"bg-cannabis-600 text-white hover:bg-cannabis-500"} disabled:opacity-50`,children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin",children:"‚ü≥"}),e.jsx("span",{children:"Processing..."})]}):S?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"‚úì"}),e.jsx("span",{children:"You're watching this!"})]}):w?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"üîî"}),e.jsx("span",{children:"Watching ‚Ä¢ Tap to unwatch"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"üîî"}),e.jsx("span",{children:"Watch for Restocks & Deals"})]})}),k!==void 0&&k>0&&e.jsxs("p",{className:"text-center text-xs text-neutral-500 mt-2",children:[k," ",k===1?"person is":"people are"," watching this"]}),N&&!l&&e.jsx("p",{className:"text-center text-xs text-red-400 mt-2",children:N})]})}function ae({productId:t,compact:n=!1}){const a=P(y.smartAnalytics.getProductInsights,{productId:t}),r=P(y.smartAnalytics.getPopularityScore,{productId:t});return!a||!r?e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-12 bg-neutral-800 rounded-lg"}),e.jsx("div",{className:"h-20 bg-neutral-800 rounded-lg"})]}):a.insights.totalEvents===0?e.jsxs("div",{className:"bg-neutral-900 rounded-xl p-4 border border-neutral-800",children:[e.jsx("p",{className:"text-sm text-neutral-500 text-center",children:"üìä Not enough data yet to show trends"}),e.jsx("p",{className:"text-xs text-neutral-600 text-center mt-1",children:"Check back as we track more inventory changes"})]}):n?e.jsx(le,{insights:a,popularity:r}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(ce,{popularity:r}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(oe,{insights:a}),e.jsx(de,{insights:a})]}),a.recentEvents.length>0&&e.jsx(xe,{events:a.recentEvents})]})}function le({insights:t,popularity:n}){return e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(ie,{tier:n.tier,score:n.score}),t.insights.velocity&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-neutral-800 text-xs text-neutral-300",children:[e.jsx("span",{children:"‚ö°"}),e.jsx("span",{children:t.insights.velocity})]}),t.insights.restockPrediction&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-neutral-800 text-xs text-neutral-300",children:[e.jsx("span",{children:"üì¶"}),e.jsx("span",{children:t.insights.restockPrediction})]})]})}function ie({tier:t,score:n}){const a={fire:{emoji:"üî•",color:"bg-gradient-to-r from-red-600 to-orange-500",label:"Fire"},hot:{emoji:"‚ö°",color:"bg-gradient-to-r from-amber-600 to-yellow-500",label:"Hot"},warm:{emoji:"üìà",color:"bg-amber-700",label:"Trending"},normal:{emoji:"üìä",color:"bg-neutral-700",label:"Normal"},cold:{emoji:"‚ùÑÔ∏è",color:"bg-blue-900",label:"Low demand"}},{emoji:r,color:s,label:l}=a[t]||a.normal;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full ${s} text-xs text-white font-medium`,children:[e.jsx("span",{children:r}),e.jsx("span",{children:l}),e.jsxs("span",{className:"opacity-75",children:["(",n,")"]})]})}function ce({popularity:t}){const n={fire:"from-red-600 via-orange-500 to-yellow-500",hot:"from-amber-500 to-yellow-400",warm:"from-amber-700 to-amber-600",normal:"from-neutral-600 to-neutral-500",cold:"from-blue-800 to-blue-700"},a={fire:"üî•",hot:"‚ö°",warm:"üìà",normal:"üìä",cold:"‚ùÑÔ∏è"};return e.jsxs("div",{className:`rounded-xl p-4 bg-gradient-to-br ${n[t.tier]||n.normal}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/80 font-medium uppercase tracking-wide",children:"Popularity Score"}),e.jsxs("div",{className:"flex items-baseline gap-2 mt-1",children:[e.jsx("span",{className:"text-3xl font-bold text-white",children:t.score}),e.jsx("span",{className:"text-lg text-white/80",children:"/100"}),e.jsx("span",{className:"text-2xl ml-2",children:a[t.tier]})]})]}),e.jsxs("div",{className:"text-right text-white/90",children:[e.jsx("p",{className:"text-sm font-medium capitalize",children:t.tier}),e.jsxs("p",{className:"text-xs text-white/70",children:[t.confidence," confidence"]})]})]}),e.jsxs("div",{className:"flex gap-4 mt-3 pt-3 border-t border-white/20 text-xs text-white/80",children:[e.jsxs("span",{children:["üìç ",t.metrics.locationsCarrying," locations"]}),e.jsxs("span",{children:["üì¶ ",t.metrics.restockCount," restocks"]}),e.jsxs("span",{children:["üí® ",t.metrics.soldOutCount," sold out"]})]})]})}function oe({insights:t}){const n=t.insights.avgHoursToSellout,a=t.insights.velocity;return e.jsxs("div",{className:"bg-neutral-900 rounded-xl p-4 border border-neutral-800",children:[e.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide mb-2",children:"‚ö° Sell-Out Speed"}),a?e.jsx("p",{className:"text-sm text-white font-medium",children:a}):e.jsx("p",{className:"text-sm text-neutral-500",children:"No data yet"}),n!==null&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"h-2 bg-neutral-800 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${n<4?"bg-red-500 w-full animate-pulse":n<12?"bg-orange-500 w-4/5":n<24?"bg-yellow-500 w-3/5":n<48?"bg-green-500 w-2/5":"bg-neutral-600 w-1/5"}`})}),e.jsxs("p",{className:"text-xs text-neutral-600 mt-1",children:["Avg: ",n<24?`${Math.round(n)}h`:`${Math.round(n/24)}d`]})]})]})}function de({insights:t}){const n=t.insights.restockPrediction,a=t.insights.topRestockDays;return e.jsxs("div",{className:"bg-neutral-900 rounded-xl p-4 border border-neutral-800",children:[e.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide mb-2",children:"üì¶ Restock Pattern"}),n?e.jsx("p",{className:"text-sm text-white font-medium",children:n}):a.length>0?e.jsxs("p",{className:"text-sm text-neutral-400",children:["Often restocks ",a.join(", ")]}):e.jsx("p",{className:"text-sm text-neutral-500",children:"No pattern detected"}),a.length>0&&e.jsx("div",{className:"flex gap-1 mt-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(r=>e.jsx("div",{className:`flex-1 h-6 rounded text-xs flex items-center justify-center ${a.includes(r)?"bg-cannabis-600 text-white font-medium":"bg-neutral-800 text-neutral-600"}`,children:r.charAt(0)},r))})]})}function xe({events:t}){const n={restock:{emoji:"üì¶",label:"Restocked",color:"text-green-400"},sold_out:{emoji:"üí®",label:"Sold out",color:"text-red-400"},price_drop:{emoji:"üìâ",label:"Price drop",color:"text-green-400"},price_increase:{emoji:"üìà",label:"Price up",color:"text-amber-400"},new_product:{emoji:"üÜï",label:"New drop",color:"text-blue-400"},removed:{emoji:"üóëÔ∏è",label:"Removed",color:"text-neutral-500"}},a=r=>{const s=Date.now()-r,l=Math.floor(s/(1e3*60*60)),d=Math.floor(l/24);return d>0?`${d}d ago`:l>0?`${l}h ago`:"just now"};return e.jsxs("div",{className:"bg-neutral-900 rounded-xl p-4 border border-neutral-800",children:[e.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide mb-3",children:"üìã Recent Activity"}),e.jsx("div",{className:"space-y-2",children:t.slice(0,5).map((r,s)=>{const l=n[r.type]||{emoji:"üìù",label:r.type,color:"text-neutral-400"};return e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:`flex items-center gap-2 ${l.color}`,children:[e.jsx("span",{children:l.emoji}),e.jsx("span",{children:l.label})]}),e.jsx("span",{className:"text-xs text-neutral-600",children:a(r.timestamp)})]},s)})})]})}function ue({productId:t,userLocation:n,onClose:a}){var S;const r=x.useRef(null),s=P(y.products.getById,{id:t}),l=P(y.inventory.getByProduct,{productId:t});x.useEffect(()=>{var u;const c=v=>{v.key==="Escape"&&a()};return document.addEventListener("keydown",c),(u=r.current)==null||u.focus(),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",c),document.body.style.overflow=""}},[a]);const d=c=>{c.target===c.currentTarget&&a()},h=(c,u)=>!n||!c||!u?null:pe(n.lat,n.lng,c,u),p=[...l||[]].sort((c,u)=>{var w,k,i,f,j,b,o,C;if(c.inStock!==u.inStock)return c.inStock?-1:1;const v=h((k=(w=c.retailer)==null?void 0:w.address)==null?void 0:k.lat,(f=(i=c.retailer)==null?void 0:i.address)==null?void 0:f.lng),g=h((b=(j=u.retailer)==null?void 0:j.address)==null?void 0:b.lat,(C=(o=u.retailer)==null?void 0:o.address)==null?void 0:C.lng);return v!==null&&g!==null?v-g:0}),N=p.filter(c=>c.inStock).length,m=p.length>0?Math.min(...p.map(c=>c.currentPrice)):null;return e.jsxs("div",{ref:r,className:"fixed inset-0 z-50 bg-black/80 flex items-end sm:items-center justify-center",onClick:d,tabIndex:-1,role:"dialog","aria-modal":"true","aria-label":s?`${s.name} product details`:"Loading product details",children:[e.jsxs("div",{className:"w-full max-w-lg bg-neutral-900 rounded-t-2xl sm:rounded-2xl max-h-[85vh] overflow-hidden flex flex-col animate-slide-up",children:[e.jsxs("div",{className:"p-4 border-b border-neutral-800 flex items-start justify-between",children:[e.jsx("div",{className:"flex-1 min-w-0",children:s?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-cannabis-400 font-medium",children:(S=s.brand)==null?void 0:S.name}),e.jsx("h2",{className:"text-xl font-bold text-white truncate",children:s.name}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-neutral-800 text-neutral-400",children:me(s.category)}),s.strain&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-neutral-800 text-neutral-400",children:s.strain})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"skeleton h-4 w-24 rounded"}),e.jsx("div",{className:"skeleton h-6 w-48 rounded"})]})}),e.jsx("button",{onClick:a,className:"p-2 -mr-2 -mt-2 rounded-full hover:bg-neutral-800 text-neutral-400 hover:text-white transition-colors","aria-label":"Close product details",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l&&e.jsxs("div",{className:"px-4 py-3 bg-neutral-800/50 border-b border-neutral-800",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-cannabis-400",children:N}),e.jsx("p",{className:"text-xs text-neutral-500",children:"In Stock"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:p.length}),e.jsx("p",{className:"text-xs text-neutral-500",children:"Locations"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:m?`$${m.toFixed(0)}`:"-"}),e.jsx("p",{className:"text-xs text-neutral-500",children:"Lowest Price"})]})]}),e.jsx(re,{productId:t,productName:s==null?void 0:s.name})]}),e.jsxs("div",{className:"px-4 py-3 border-b border-neutral-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-lg",children:"üìä"}),e.jsx("h3",{className:"text-sm font-medium text-neutral-400",children:"Smart Insights"})]}),e.jsx(ae,{productId:t})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("h3",{className:"text-sm font-medium text-neutral-400 mb-3",children:["Available at ",p.length," locations"]}),l?p.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-neutral-500",children:"Not available at any tracked location"}),e.jsx("p",{className:"text-xs text-neutral-600 mt-2",children:"This product hasn't been seen in recent inventory scans"})]}):e.jsx("div",{className:"space-y-3",children:p.map(c=>{var v,g,w,k,i,f,j,b,o;const u=h((g=(v=c.retailer)==null?void 0:v.address)==null?void 0:g.lat,(k=(w=c.retailer)==null?void 0:w.address)==null?void 0:k.lng);return e.jsxs("div",{className:"bg-neutral-800/50 rounded-lg p-3 border border-neutral-700/50",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-white truncate",children:((i=c.retailer)==null?void 0:i.name)||"Unknown"}),e.jsxs("p",{className:"text-xs text-neutral-500 mt-0.5",children:[(j=(f=c.retailer)==null?void 0:f.address)==null?void 0:j.city,", ",(o=(b=c.retailer)==null?void 0:b.address)==null?void 0:o.state,u!==null&&e.jsxs("span",{children:[" ‚Ä¢ ",u.toFixed(1)," mi away"]})]})]}),e.jsx(te,{inStock:c.inStock,stockLevel:c.stockLevel,lastInStockAt:c.lastInStockAt,size:"sm"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-neutral-700/50",children:[e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsxs("span",{className:"text-lg font-bold text-white",children:["$",c.currentPrice.toFixed(2)]}),c.previousPrice&&c.currentPrice<c.previousPrice&&e.jsxs("span",{className:"text-xs text-green-400",children:["‚Üì $",(c.previousPrice-c.currentPrice).toFixed(2)," off"]})]}),e.jsxs("span",{className:`text-xs ${A(c.lastUpdatedAt)?"text-amber-500":"text-neutral-500"}`,children:[A(c.lastUpdatedAt)&&"‚ö†Ô∏è ","Updated ",he(c.lastUpdatedAt)]})]})]},c._id)})}):e.jsx("div",{className:"space-y-3",children:[1,2,3].map(c=>e.jsx("div",{className:"skeleton h-20 rounded-lg"},c))})]})})]}),e.jsx("style",{children:`
        @keyframes slide-up {
          from { transform: translateY(100%); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-up {
          animation: slide-up 0.2s ease-out;
        }
      `})]})}function me(t){return t.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}function he(t){const a=Date.now()-t,r=Math.floor(a/6e4),s=Math.floor(r/60),l=Math.floor(s/24);return l>0?`${l}d ago`:s>0?`${s}h ago`:r>0?`${r}m ago`:"just now"}function A(t){return(Date.now()-t)/36e5>24}function pe(t,n,a,r){const l=E(a-t),d=E(r-n),h=Math.sin(l/2)*Math.sin(l/2)+Math.cos(E(t))*Math.cos(E(a))*Math.sin(d/2)*Math.sin(d/2);return 3959*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)))}function E(t){return t*(Math.PI/180)}const T=()=>{try{return localStorage.getItem("cannasignal_email")}catch{return null}},fe=t=>{try{localStorage.setItem("cannasignal_email",t)}catch{}};function ge({onClose:t,onProductClick:n}){const a=x.useRef(null),[r,s]=x.useState(T()||""),[l,d]=x.useState(!!T()),[h,p]=x.useState(!1),[N,m]=x.useState(null);x.useEffect(()=>{var f;const i=j=>{j.key==="Escape"&&t()};return document.addEventListener("keydown",i),(f=a.current)==null||f.focus(),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",i),document.body.style.overflow=""}},[t]);const S=P(y.alerts.getWatchesByEmail,l?{email:r}:"skip"),c=$(y.alerts.deleteWatch),u=$(y.alerts.toggleWatch),v=i=>{i.preventDefault(),m(null);const f=r.trim();if(!f){m("Please enter your email address");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f)){m("Please enter a valid email address");return}fe(f),d(!0),p(!1)},g=async i=>{confirm("Remove this from your watchlist?")&&await c({watchId:i})},w=async i=>{await u({watchId:i})},k=i=>{i.target===i.currentTarget&&t()};return!l||h?e.jsx("div",{ref:a,className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:k,tabIndex:-1,role:"dialog","aria-modal":"true","aria-label":"Enter email for watchlist",children:e.jsxs("div",{className:"w-full max-w-md bg-neutral-900 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"My Watchlist"}),e.jsx("button",{onClick:t,className:"p-2 -mr-2 rounded-full hover:bg-neutral-800 text-neutral-400","aria-label":"Close",children:"‚úï"})]}),e.jsxs("form",{onSubmit:v,children:[e.jsx("p",{className:"text-neutral-400 mb-4",children:"Enter your email to view and manage your watched products."}),e.jsx("input",{type:"email",value:r,onChange:i=>{s(i.target.value),m(null)},placeholder:"your@email.com",className:`w-full px-4 py-3 bg-neutral-800 border rounded-lg text-white focus:outline-none focus:border-cannabis-500 ${N?"border-red-500":"border-neutral-700"}`,autoFocus:!0,"aria-invalid":!!N,"aria-describedby":N?"email-error":void 0}),N&&e.jsx("p",{id:"email-error",className:"text-red-400 text-sm mt-2",children:N}),e.jsx("button",{type:"submit",className:"w-full mt-4 py-3 bg-cannabis-600 text-white rounded-lg font-medium hover:bg-cannabis-500",children:"View Watchlist"}),h&&e.jsx("button",{type:"button",onClick:()=>p(!1),className:"w-full mt-2 py-2 text-neutral-500 text-sm hover:text-neutral-400",children:"Cancel"})]})]})}):e.jsxs("div",{ref:a,className:"fixed inset-0 z-50 bg-black/80 flex items-end sm:items-center justify-center",onClick:k,tabIndex:-1,role:"dialog","aria-modal":"true","aria-label":"Your watchlist",children:[e.jsxs("div",{className:"w-full max-w-lg bg-neutral-900 rounded-t-2xl sm:rounded-2xl max-h-[85vh] overflow-hidden flex flex-col animate-slide-up",children:[e.jsxs("div",{className:"p-4 border-b border-neutral-800 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{children:"üîî"}),e.jsx("span",{children:"My Watchlist"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"text-xs text-neutral-500 hover:text-neutral-400",children:[r," ‚Ä¢ Change"]})]}),e.jsx("button",{onClick:t,className:"p-2 -mr-2 rounded-full hover:bg-neutral-800 text-neutral-400",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:S?S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-4xl mb-4",children:"üëÄ"}),e.jsx("p",{className:"text-neutral-400 mb-2",children:"No watched products yet"}),e.jsx("p",{className:"text-sm text-neutral-600",children:'Find a product and tap "Watch" to get alerted when it restocks'})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-neutral-500 mb-2",children:"You'll be notified when these products restock or drop in price"}),S.map(i=>{var f,j;return e.jsxs("div",{className:`bg-neutral-800/50 rounded-lg p-4 border transition-opacity ${i.isActive?"border-neutral-700/50":"border-neutral-800 opacity-50"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("button",{onClick:()=>n(i.productId),className:"flex-1 text-left min-w-0",children:[e.jsx("p",{className:"text-xs text-cannabis-400 font-medium",children:((f=i.brand)==null?void 0:f.name)||"Unknown Brand"}),e.jsx("p",{className:"text-white font-medium truncate",children:((j=i.product)==null?void 0:j.name)||"Unknown Product"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:i.alertTypes.map(b=>e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-700 text-neutral-400",children:b==="restock"?"üì¶ Restock":b==="price_drop"?"üìâ Price Drop":b==="new_drop"?"üÜï New Drop":b},b))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>w(i._id),className:`p-2 rounded-lg transition-colors ${i.isActive?"text-cannabis-400 hover:bg-cannabis-600/20":"text-neutral-600 hover:bg-neutral-700"}`,title:i.isActive?"Pause alerts":"Resume alerts",children:i.isActive?"üîî":"üîï"}),e.jsx("button",{onClick:()=>g(i._id),className:"p-2 rounded-lg text-neutral-500 hover:text-red-400 hover:bg-red-600/10",title:"Remove from watchlist",children:"üóëÔ∏è"})]})]}),i.lastNotifiedAt&&e.jsxs("p",{className:"text-xs text-neutral-600 mt-2",children:["Last alert: ",je(i.lastNotifiedAt)]})]},i._id)})]}):e.jsx("div",{className:"space-y-3",children:[1,2,3].map(i=>e.jsx("div",{className:"h-20 bg-neutral-800 rounded-lg animate-pulse"},i))})}),e.jsx("div",{className:"p-4 border-t border-neutral-800 bg-neutral-800/50",children:e.jsxs("p",{className:"text-xs text-neutral-500 text-center",children:["Alerts are sent to Discord when products restock or prices drop.",e.jsx("br",{}),"Email notifications coming soon!"]})})]}),e.jsx("style",{children:`
        @keyframes slide-up {
          from { transform: translateY(100%); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-up {
          animation: slide-up 0.2s ease-out;
        }
      `})]})}function je(t){const a=Date.now()-t,r=Math.floor(a/6e4),s=Math.floor(r/60),l=Math.floor(s/24);return l>0?`${l}d ago`:s>0?`${s}h ago`:r>0?`${r}m ago`:"just now"}function be({count:t=3}){return e.jsx("div",{className:"space-y-3",children:Array.from({length:t}).map((n,a)=>e.jsx("div",{className:"bg-neutral-900 border border-neutral-800 rounded-xl p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg skeleton flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"skeleton h-3 w-20 rounded"}),e.jsx("div",{className:"skeleton h-5 w-3/4 rounded"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"skeleton h-4 w-16 rounded"}),e.jsx("div",{className:"skeleton h-4 w-12 rounded"})]}),e.jsxs("div",{className:"flex justify-between pt-1",children:[e.jsx("div",{className:"skeleton h-6 w-16 rounded"}),e.jsx("div",{className:"skeleton h-4 w-24 rounded"})]})]})]})},a))})}function Ne({onProductClick:t,limit:n=10,hoursBack:a=24}){const r=P(y.smartAnalytics.getHotProducts,{limit:n,hoursBack:a});return r?r.length===0?e.jsxs("div",{className:"text-center py-8 bg-neutral-900 rounded-xl",children:[e.jsx("p",{className:"text-4xl mb-2",children:"üìä"}),e.jsx("p",{className:"text-neutral-400",children:"No trending data yet"}),e.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Check back as we gather more inventory data"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx("span",{children:"üî•"}),e.jsx("span",{children:"Hot Right Now"})]}),e.jsxs("span",{className:"text-xs text-neutral-500",children:["Last ",a,"h"]})]}),e.jsx("div",{className:"space-y-2",children:r.map((s,l)=>e.jsx("button",{onClick:()=>t(s.productId),className:"w-full bg-neutral-900 border border-neutral-800 rounded-xl p-4 text-left hover:border-neutral-700 transition-all hover:scale-[1.01] active:scale-[0.99]",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold flex-shrink-0 ${l===0?"bg-gradient-to-br from-yellow-500 to-orange-500 text-white":l===1?"bg-gradient-to-br from-neutral-400 to-neutral-500 text-white":l===2?"bg-gradient-to-br from-amber-600 to-amber-700 text-white":"bg-neutral-800 text-neutral-400"}`,children:l+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-cannabis-400 font-medium truncate",children:s.brandName}),e.jsx("h3",{className:"text-white font-medium truncate leading-tight",children:s.productName})]}),e.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:e.jsx(ye,{score:s.hotScore,isNewDrop:s.isNewDrop})})]}),e.jsx("p",{className:"text-sm text-amber-400/80 mt-1",children:s.hotReason}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 text-xs text-neutral-500",children:[s.metrics.restocks>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"üì¶"}),e.jsxs("span",{children:[s.metrics.restocks," restocks"]})]}),s.metrics.soldOuts>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"üí®"}),e.jsxs("span",{children:[s.metrics.soldOuts," sold out"]})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"üìç"}),e.jsxs("span",{children:[s.metrics.locationCount," locations"]})]}),s.metrics.avgPrice&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"üíµ"}),e.jsxs("span",{children:["~$",s.metrics.avgPrice]})]})]})]})]})},s.productId))})]}):e.jsx("div",{className:"animate-pulse space-y-3",children:[...Array(3)].map((s,l)=>e.jsx("div",{className:"bg-neutral-900 rounded-xl p-4 h-24"},l))})}function ye({score:t,isNewDrop:n}){return n?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gradient-to-r from-green-600 to-emerald-600 text-white text-xs font-medium",children:[e.jsx("span",{children:"üÜï"}),e.jsx("span",{children:"New"})]}):t>=10?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gradient-to-r from-red-600 to-orange-500 text-white text-xs font-medium animate-pulse",children:[e.jsx("span",{children:"üî•"}),e.jsx("span",{children:"Fire"})]}):t>=6?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gradient-to-r from-amber-600 to-yellow-500 text-white text-xs font-medium",children:[e.jsx("span",{children:"‚ö°"}),e.jsx("span",{children:"Hot"})]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-neutral-700 text-neutral-300 text-xs font-medium",children:[e.jsx("span",{children:"üìà"}),e.jsx("span",{children:"Trending"})]})}function ve(){const[t,n]=x.useState({query:"",category:null,strain:null,retailerId:null,inStockOnly:!1}),[a,r]=x.useState(null),[s,l]=x.useState(null),[d,h]=x.useState(!1),[p,N]=x.useState(!1),[m,S]=x.useState("trending");x.useEffect(()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(o=>{l({lat:o.coords.latitude,lng:o.coords.longitude})},()=>{l({lat:40.7128,lng:-74.006})})},[]);const c=P(y.retailers.list,{}),u=P(y.products.list,{category:t.category||void 0,limit:100}),v=P(y.products.search,{query:t.query||""}),g=t.query?v:u,w={categories:[...new Set((u==null?void 0:u.map(o=>o.category))||[])].sort(),strains:[...new Set((u==null?void 0:u.map(o=>o.strain).filter(Boolean))||[])].sort(),retailers:(c||[]).map(o=>({id:o._id,name:o.name,city:o.address.city,region:o.region}))},k=x.useCallback(o=>{n(C=>({...C,query:o}))},[]),i=x.useCallback((o,C)=>{n(_=>({..._,[o]:C}))},[]),f=x.useCallback(()=>{n({query:"",category:null,strain:null,retailerId:null,inStockOnly:!1})},[]),j=[t.category,t.strain,t.retailerId,t.inStockOnly].filter(Boolean).length,b=(g||[]).filter(o=>!(t.strain&&o.strain!==t.strain)).slice(0,50);return e.jsxs("div",{className:"min-h-screen bg-neutral-950",children:[e.jsxs("header",{className:"sticky top-0 z-40 bg-neutral-950/95 backdrop-blur-sm border-b border-neutral-800",children:[e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h1",{className:"text-xl font-bold text-cannabis-400 flex items-center gap-2",children:[e.jsx("span",{children:"üåø"}),e.jsx("span",{children:"CannaSignal"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>N(!0),className:"text-sm px-3 py-1.5 rounded-full bg-neutral-800 text-neutral-300 hover:bg-neutral-700 flex items-center gap-1",children:[e.jsx("span",{children:"üîî"}),e.jsx("span",{children:"Alerts"})]}),e.jsx("span",{className:"text-xs text-neutral-500 flex items-center gap-1",children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-cannabis-500"}),e.jsx("span",{children:"üìç NYC"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"}),e.jsx("span",{children:"..."})]})})]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("button",{onClick:()=>S("trending"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 ${m==="trending"?"bg-gradient-to-r from-orange-600 to-amber-500 text-white":"bg-neutral-800 text-neutral-400 hover:bg-neutral-700"}`,children:[e.jsx("span",{children:"üî•"}),e.jsx("span",{children:"Trending"})]}),e.jsxs("button",{onClick:()=>S("search"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2 ${m==="search"?"bg-cannabis-600 text-white":"bg-neutral-800 text-neutral-400 hover:bg-neutral-700"}`,children:[e.jsx("span",{children:"üîç"}),e.jsx("span",{children:"Search"})]})]}),m==="search"&&e.jsx(e.Fragment,{children:e.jsx(G,{value:t.query,onChange:k})}),m==="search"&&e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("button",{onClick:()=>h(!d),className:`text-sm px-3 py-1.5 rounded-full flex items-center gap-1 transition-colors ${j>0?"bg-cannabis-600 text-white":"bg-neutral-800 text-neutral-300 hover:bg-neutral-700"}`,children:[e.jsx("span",{children:"üéõÔ∏è"}),e.jsx("span",{children:"Filters"}),j>0&&e.jsx("span",{className:"ml-1 w-5 h-5 rounded-full bg-white/20 flex items-center justify-center text-xs font-medium",children:j})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-neutral-400 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.inStockOnly,onChange:o=>i("inStockOnly",o.target.checked),className:"w-4 h-4 rounded border-neutral-600 bg-neutral-800 text-cannabis-500 focus:ring-cannabis-500 focus:ring-offset-0"}),e.jsx("span",{children:"In stock only"})]})]})]}),m==="search"&&d&&w.categories.length>0&&e.jsx(Z,{options:w,filters:t,onChange:i,onClear:f})]}),e.jsx("main",{className:"max-w-3xl mx-auto px-4 py-4",children:m==="trending"?e.jsx(Ne,{onProductClick:o=>r(o),limit:15,hoursBack:48}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("p",{className:"text-sm text-neutral-500",children:g?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-neutral-300 font-medium",children:b.length})," ","products found"]}):e.jsx("span",{className:"skeleton inline-block w-24 h-4 rounded"})}),b.length>0&&e.jsxs("p",{className:"text-xs text-neutral-600",children:["Sorted by ",s?"distance":"last updated"]})]}),g?b.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-4xl mb-4",children:"üîç"}),e.jsx("p",{className:"text-neutral-400 mb-2",children:"No products found"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Try adjusting your search or filters"}),j>0&&e.jsx("button",{onClick:f,className:"mt-4 text-sm text-cannabis-400 hover:text-cannabis-300",children:"Clear all filters"})]}):e.jsx("div",{className:"space-y-3",children:b.map(o=>e.jsx(we,{product:o,onClick:()=>r(o._id)},o._id))}):e.jsx(be,{count:6})]})}),a&&e.jsx(ue,{productId:a,userLocation:s,onClose:()=>r(null)}),p&&e.jsx(ge,{onClose:()=>N(!1),onProductClick:o=>{N(!1),r(o)}}),e.jsx("footer",{className:"border-t border-neutral-800 mt-8 py-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 text-center",children:[e.jsx("p",{className:"text-xs text-neutral-600",children:"Real-time inventory tracking for NYS licensed dispensaries"}),e.jsx("p",{className:"text-xs text-neutral-700 mt-1",children:"Data updates every 15 minutes ‚Ä¢ Not affiliated with any dispensary"})]})})]})}function we({product:t,onClick:n}){var a,r;return e.jsx("button",{onClick:n,className:"w-full bg-neutral-900 border border-neutral-800 rounded-xl p-4 text-left hover:border-neutral-700 transition-colors active:bg-neutral-800",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-neutral-800 flex-shrink-0 overflow-hidden",children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:Ce(t.category)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-cannabis-400 font-medium truncate",children:((a=t.brand)==null?void 0:a.name)||"Unknown Brand"}),e.jsx("h3",{className:"text-white font-medium truncate leading-tight",children:t.name})]}),e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border text-xs px-2 py-0.5 font-medium bg-neutral-500/20 text-neutral-400 border-neutral-500/30",children:[e.jsx("span",{children:"‚ö™"}),e.jsx("span",{children:"Check"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1.5",children:[e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-800 text-neutral-400",children:ke(t.category)}),t.strain&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-800 text-neutral-400",children:t.strain}),t.weight&&e.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-800 text-neutral-400",children:[t.weight.amount,t.weight.unit]}),((r=t.thcRange)==null?void 0:r.max)&&e.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded bg-neutral-800 text-neutral-400",children:["THC ",t.thcRange.max,"%"]})]}),e.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:"Tap to see availability across locations"})]})]})})}function ke(t){return t.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}function Ce(t){return{flower:"üå∏",pre_roll:"üö¨",preroll:"üö¨",vape:"üí®",edible:"üç™",concentrate:"üíé",tincture:"üíß",topical:"üß¥"}[t.toLowerCase()]||"üåø"}const Se="https://quick-weasel-225.convex.cloud",Pe=new D(Se);L.createRoot(document.getElementById("root")).render(e.jsx(B.StrictMode,{children:e.jsx(U,{client:Pe,children:e.jsx(ve,{})})}));
